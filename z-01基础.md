## Cesium基础

###  1.Cesium平台

CesiumJS 作为免费开源软件与 Cesium ion 一起作为商业选项提供扩展到完整的 3D 地理空间平台,那么什么是Cesium ion呢？

> Cesium ion 最初是免费开源软件 CesiumJS 的商业扩展，旨在为 3D Tiles 创建最高效的管道。因为我们将 ion 构建为端到端 3D 平台，所以开发人员可以上传他们的 3D 内容并在云中托管 3D Tiles，以便任何可视化引擎都可以流式传输内容。它还对非商业和非政府用户免费，最多可存储 5 GB 的数据，并且用户可以通过基于令牌的访问控制来保护其数据。

>cesium ion 官网：https://cesium.com/platform/cesium-ion/


**cesium ion**数据格式：

* 点云（.las .laz）
* 3D建筑 (.citygml .xml .gml .kml .kmz .dae)
* 地形数据 (.tiff .tif .flt .asc .src .img .dem .terraindb)
* 卫星或无人机图像(.tiff .fif .flt .asc .src .img .dem .jpg .jpeg .png)
* BIM、CAD或其他3D模型（.obj .fbx .dae .gltf .glb）
* 摄影测量或 LiDAR 衍生的网格（.obj .fbx .dae .gltf .glb）



### 2. 3D Tiles

> **3D Tiles**是一种用于在网络上高效流式传输和渲染 3D 地理空间数据的开放标准。这种格式被设计用来处理各种类型的 3D 数据，包括点云、3D 建筑模型、地形数据等。3D Tiles 的主要特点是使用了分层和分块的技术来优化数据的加载和渲染。每个数据集被划分为多个小的 "瓦片" ，每个瓦片包含了一个小区域的数据。这些瓦片按照它们在空间中的位置和详细程度被组织成一棵树。

3D Tiles 是由 Cesium 团队开发的，但它是一个开放的标准，可以被任何支持 WebGL 的 3D 地图库或应用使用。你可以在 Cesium 或其他支持 3D Tiles 的软件中，加载和显示 3D Tiles 格式的数据。

3D Tiles 的主要目的是提高海量异构数据集的流式传输和渲染性能。 3D 图块的基础是一种空间数据结构，它支持 分层细节级别 (HLOD)，因此仅对可见图块进行流式传输 - 并且仅对给定 3D 视图最重要的图块进行流式传输。平铺有效负载可以是二进制和上下文感知压缩的.


### 3.Cesium Stories

> Cesium Stories 是 Cesium 提供的一种在线工具，可以让你创建和分享富有故事性的 3D 地球和地图。通过 Cesium Stories，你可以在 3D 场景中添加位置、飞行路径、注释等元素，以及绑定照片、视频和其他媒体，构建出一种富有动态和互动性的地理空间展示。

- 在 3D 场景中添加和定位多个地点，每个地点可以附带说明文本和媒体（如图片、视频）；
- 设置相机的飞行路径和速度，创建动态的视觉效果；
- 调整场景的时间和光照，模拟不同的时间和天气条件；
- 在地图上绘制线条和区域，表示路径、范围或其他地理信息；
- 分享和发布你的故事，让其他人可以在线浏览和互动。





# CesiumJS基础



### 1.坐标系

> 在`cesium`中，地球使用的坐标系是笛卡尔Cartesian3类以ECEF形式表示，在该系统中，原点为地球的中心，坐标为(0,0,0)。这就是这就是为什么我们 `Cartesian3.fromDegrees `在 ECEF 中将经度、纬度和高度转换为 X、Y 和 Z。

### 1.实体

> 可以在 CesiumJS 中进行的高级可视化，例如点、标记、形状和标签等，实体是Cesium中用来创建和操作世界中的各种物体的主要方式。

一个实体可以有多种属性，例如位置（position）、形状（shape）、方向（orientation）、颜色（color）等等。这些属性可以是静态的（即不随时间变化），也可以是动态的（即随时间变化）。



在使用中，例如，如果想突出显示地图的一部分或引起人们对在屏幕上移动的模型的注意，则需要使用实体来实现这一点。

#### 实体API

> CesiumJS的控件数据api主要分为两类。
> 一类是面向图形开发人员的低级 API `Primitive API`
> 另一类是用于数据驱动可视化的`Entity API`

- `Primitive`：用于绘制图形，例如点、线、多边形等。
    - 概念：在Cesium中，Primitive（原始体）是用来表示一组可渲染的几何体的对象。原始体可以是点、线、面等基本图形，也可以是由这些基本图形组成的更复杂的图形。
    - 用途：在场景中创建和渲染几何体。例如，你可以使用原始体来创建地形、3D模型、点云、多边形等。
    - 属性： 原始体的属性包括几何体、材质、位置、方向、颜色等。

- `Entity`: 它代表场景中的一个可视化对象。
    - 概念：Entity（实体）是Cesium中用来表示场景中的可视化对象的对象。实体可以是点、线、面等基本图形，也可以是由这些基本图形组成的更复杂的图形。
    - 用途：创建和管理场景中的对象。例如，关联图形元素，处理动态数据，实现交互等。
    - 属性：实体可以有多种属性，例如位置（position）、形状（shape）、方向（orientation）、颜色（color）等等。这些属性可以是静态的（即不随时间变化），也可以是动态的（即随时间变化）。
- `Entity`和`Primitive`的区别：
    - Entity是高级API，用于数据驱动可视化。
    - Primitive是低级API，用于绘制图形。
- `Entity`和`Primitive`的关系：
    - Entity可以包含一个或多个Primitive。
    - Entity可以包含一个或多个Entity。
    - Entity可以包含一个或多个Primitive和Entity。
    - Primitive不能包含Entity。
    - Primitive不能包含Primitive。
- 使用时机：
    - 如果你需要在场景中创建和渲染几何体，并需要精细跳转渲染效果或者对性能有较高要求，那么你应该使用Primitive。
    - 如果你需要在场景中创建和管理对象，或者你需要创建的对象比较复杂、需要处理动态数据那么你应该使用Entity。

### 基础视图组件
- `Viewer`：视图容器，用于渲染场景。
  - 概念：Viewer是一个视图容器，用于渲染场景。
  - 作用：封装了Scene、Camera以及其他一些UI组件（如信息框、时间线、动画控制器等）。Viewer提供了一种简单方便的方式来创建和控制Cesium应用。例如，你可以使用Viewer的方法来添加实体、改变视图、控制动画等。
- `Scene`：场景，用于管理场景中的对象。
  - 概念：Scene是一个场景对象，用于管理场景中的对象。Scene可以包含一个或多个Entity。
  - 作用：提供许多设置和方法来控制渲染过程，如设置背景色、设置环境光、添加和删除图形元素等。Scene还包含了一个Camera对象，用于控制视图的位置和方向。
- `Camera`：相机，用于控制视图的视角。
  - 概念：Camera是一个相机对象，用于控制视图的视角。
  - 属性：position，direction，up，right，viewMatrix，projectionMatrix等。这些决定我们从哪个位置哪个角度看场景。
- `ScreenSpaceEventHandler`：屏幕空间事件处理器，用于处理鼠标、键盘等事件。
  - 概念：ScreenSpaceEventHandler是一个屏幕空间事件处理器，用于处理鼠标、键盘等事件。
  - 作用：提供了一种简单方便的方式来处理鼠标、键盘等事件。例如，你可以使用ScreenSpaceEventHandler的方法来监听鼠标点击事件、鼠标移动事件等。